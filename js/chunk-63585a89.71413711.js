(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63585a89"],{"0a4e":function(t,e,s){"use strict";s("0eda")},"0eda":function(t,e,s){},"18a2":function(t,e,s){t.exports=s.p+"img/icon_back.f08396c9.svg"},"20ac":function(t,e,s){"use strict";s("63fe")},2666:function(t,e,s){"use strict";s("969f")},"63fe":function(t,e,s){},6783:function(t,e,s){"use strict";s("a4d3"),s("e01a");var a=s("2fa3"),r=function(){return localStorage.getItem("token")};e["a"]={tweets:{get:function(){return a["b"].get("/tweets",{headers:{Authorization:"Bearer ".concat(r())}})},post:function(t){var e=t.description;return a["b"].post("/tweets",{description:e},{headers:{Authorization:"Bearer ".concat(r())}})}},tweet:{get:function(t){var e=t.tweet_id;return a["b"].get("/tweets/".concat(e),{headers:{Authorization:"Bearer ".concat(r())}})}}}},"6edd":function(t,e,s){t.exports=s.p+"img/commentIcon.17ee81ba.svg"},"88fd":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"recommend-bar"},[s("div",{staticClass:"recommend mt-3"},[t._m(0),s("div",{staticClass:"recommend-followers"},[s("ul",{staticClass:"recommend-followers-list"},t._l(t.recommendUsers,(function(e){return s("li",{key:e.id,staticClass:"recommend-followers-item"},[s("router-link",{staticClass:"recommend-followers-title",attrs:{to:{name:"user-profile-tweet",params:{id:e.id}}}},[s("img",{staticClass:"tweets-avatar",attrs:{src:t._f("emptyPicture")(e.avatar),alt:"avatar"}}),s("div",[s("p",{staticClass:"recommend-followers-name"},[t._v(t._s(e.name))]),s("p",{staticClass:"recommend-followers-id"},[t._v(" "+t._s(e.account)+" ")])])]),e.isFollowed?s("button",{staticClass:"followers-item-button",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.deleteFollowing(e.id)}}},[t._v(" 正在跟隨 ")]):s("button",{staticClass:"followers-item-button",on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.addFollowing(e.id)}}},[t._v(" 跟隨 ")])],1)})),0)]),t._m(1)])])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"recommend-title"},[s("p",[t._v("跟隨誰")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"recommend-fotter"},[s("a",{attrs:{href:""}},[t._v("顯示更多")])])}],n=s("5530"),i=s("1da1"),c=(s("d81d"),s("96cf"),s("1602")),o=s("2fa3"),l=s("2708"),u={data:function(){return{recommendUsers:[]}},created:function(){this.fetcgRecomendUsers()},methods:{fetcgRecomendUsers:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c["a"].users.get();case 3:s=e.sent,a=s.data,t.recommendUsers=a.users,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),o["a"].fire({icon:"error",title:"暫時無法獲取推薦名單,請稍後再試"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},deleteFollowing:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,c["a"].deleteFollowing({followingId:t});case 3:if(a=s.sent,r=a.data,"success"===r.status){s.next=7;break}throw new Error(r.message);case 7:e.recommendUsers=e.recommendUsers.map((function(e){return e.id!==t?e:Object(n["a"])(Object(n["a"])({},e),{},{followerCount:e.followerCount-1,isFollowed:!1})})),s.next=13;break;case 10:s.prev=10,s.t0=s["catch"](0),o["a"].fire({icon:"error",title:"暫時無法取消追隨,請稍後再試"});case 13:case"end":return s.stop()}}),s,null,[[0,10]])})))()},addFollowing:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,c["a"].addFollowing({id:t});case 3:if(a=s.sent,r=a.data,"success"===r.status){s.next=7;break}throw new Error(r.message);case 7:e.recommendUsers=e.recommendUsers.map((function(e){return e.id!==t?e:Object(n["a"])(Object(n["a"])({},e),{},{followerCount:e.followerCount+1,isFollowed:!0})})),s.next=13;break;case 10:s.prev=10,s.t0=s["catch"](0),o["a"].fire({icon:"error",title:"暫時無法追隨,請稍後再試"});case 13:case"end":return s.stop()}}),s,null,[[0,10]])})))()}},mixins:[l["a"]]},d=u,f=(s("20ac"),s("2877")),v=Object(f["a"])(d,a,r,!1,null,"6d73aa5c",null);e["a"]=v.exports},9291:function(t,e,s){t.exports=s.p+"img/likeIcon.5fd74e35.svg"},"969f":function(t,e,s){},"99ea":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-tweets"},[a("NavBar"),a("div",{staticClass:"tweets-container"},[a("div",{staticClass:"tweets-header"},[a("a",{attrs:{href:""}},[a("img",{attrs:{src:s("18a2"),alt:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$router.back()}}}),a("span",[t._v("推文 ")])])]),a("div",{staticClass:"tweets"},[a("div",{staticClass:"tweets-post-card"},[a("div",{staticClass:"tweets-post"},[a("div",{staticClass:"tweet-title"},[a("a",{attrs:{href:""}},[a("img",{staticClass:"tweets-avatar",attrs:{src:t.tweetUser.avatar,alt:"avatar"}})]),a("a",{staticClass:"tweets-name"},[a("div",{staticClass:"name"},[t._v(t._s(t.tweetUser.name))]),a("div",{staticClass:"id"},[t._v(t._s(t.tweetUser.account))])])]),a("div",{staticClass:"tweet-replay-container"},[a("div",{staticClass:"tweet-push-content"},[a("p",[t._v(" "+t._s(t.tweet.description)+" ")])]),a("div",{staticClass:"tweet-push-time"},[a("p",[t._v(t._s(t.tweet.createdAt))])]),a("div",{staticClass:"tweet-status"},[a("div",{staticClass:"re-tweet"},[a("span",[t._v(t._s(t.RepliesLength))]),a("span",[t._v("回覆")])]),a("div",{staticClass:"like"},[a("span",[t._v(t._s(t.likesLength))]),a("span",[t._v("喜歡次數")])])]),a("div",{staticClass:"tweet-status-icon"},[t._m(0),t.likeStatus?a("a",{staticClass:"like-icon",attrs:{href:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteLiked(t.tweet.id)}}},[a("img",{staticClass:"icon",attrs:{src:s("b768"),alt:""}})]):a("a",{staticClass:"like-icon",attrs:{href:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addLiked(t.tweet.id)}}},[a("img",{staticClass:"icon",attrs:{src:s("9291"),alt:""}})])])])])]),a("div",{staticClass:"tweets-list"},t._l(t.replies,(function(e){return a("div",{key:e.id,staticClass:"tweets-card"},[a("a",{attrs:{href:""}},[a("img",{staticClass:"tweets-avatar",attrs:{src:e.User.avatar,alt:"avatar"}})]),a("div",{staticClass:"tweets-content"},[a("a",{staticClass:"tweets tweets-title",attrs:{href:""}},[a("div",{staticClass:"tweets-reply-name"},[t._v(t._s(e.User.name))]),a("div",{staticClass:"tweets-reply-id id"},[t._v(t._s(e.User.account))]),a("div",{staticClass:"tweets-reply-time"},[t._v("3hr")])]),a("div",{},[a("span",[t._v("回覆")]),a("span",[a("a",{staticClass:"tweets-post-user",attrs:{href:""}},[t._v(t._s(t.tweetUser.account))])])]),a("div",{staticClass:"tweet tweets-text"},[a("p",{staticClass:"card-text"},[t._v(" "+t._s(e.comment)+" ")])])])])})),0)])]),a("RecommendUsers")],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"re-tweet-icon",attrs:{href:""}},[a("img",{staticClass:"icon",attrs:{src:s("6edd"),alt:""}})])}],n=s("1da1"),i=s("5530"),c=(s("159b"),s("96cf"),s("88fd")),o=s("d178"),l=s("6783"),u=s("2fa3"),d=s("1602"),f=s("2f62"),v={components:{RecommendUsers:c["a"],NavBar:o["a"]},data:function(){return{tweet:[],replies:[],tweetUser:[],likeStatus:!1,likesLength:"",RepliesLength:""}},created:function(){var t=this.$route.params;this.fetchTweet(t)},beforeRouteUpdate:function(t,e){var s=t.params;this.fetchTweet(s),e()},computed:Object(i["a"])({},Object(f["b"])(["currentUser"])),methods:{fetchTweet:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,l["a"].tweet.get(t);case 3:a=s.sent,r=a.data,e.tweet=r,e.replies=r.Replies,e.tweetUser=r.User,e.likesLength=r.Likes.length,e.RepliesLength=r.Replies.length,e.checkLikeId(e.tweet),s.next=16;break;case 13:s.prev=13,s.t0=s["catch"](0),u["a"].fire({icon:"error",title:"暫時無法獲取推文,請稍後再試"});case 16:case"end":return s.stop()}}),s,null,[[0,13]])})))()},addLiked:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,d["a"].addLiked(t);case 3:if(a=s.sent,r=a.data,"success"===r.status){s.next=7;break}throw new Error(r.message);case 7:e.likeStatus=!0,s.next=13;break;case 10:s.prev=10,s.t0=s["catch"](0),u["a"].fire({icon:"error",title:"暫時無法加入喜歡,請稍後再試"});case 13:case"end":return s.stop()}}),s,null,[[0,10]])})))()},deleteLiked:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,d["a"].deleteLiked(t);case 3:if(a=s.sent,r=a.data,"success"===r.status){s.next=7;break}throw new Error(r.message);case 7:e.likeStatus=!1,s.next=13;break;case 10:s.prev=10,s.t0=s["catch"](0),u["a"].fire({icon:"error",title:"暫時無法移除喜歡,請稍後再試"});case 13:case"end":return s.stop()}}),s,null,[[0,10]])})))()},checkLikeId:function(t){var e=this;t.Likes.forEach((function(t){t.UserId!==e.currentUser.id||(e.likeStatus=!0)}))}}},m=v,p=(s("2666"),s("2877")),w=Object(p["a"])(m,a,r,!1,null,"5ac41320",null);e["default"]=w.exports},b768:function(t,e,s){t.exports=s.p+"img/icon_like_fill.2426b6b3.svg"},d178:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav-bar"},[a("div",{staticClass:"mt-3"},[a("router-link",{staticClass:"nav-logo",attrs:{to:{name:"tweets-main"}}},[a("img",{attrs:{src:s("0eb7"),alt:""}})]),a("ul",{staticClass:"nav-list"},[a("li",{staticClass:"nav-item nav-home"},[a("router-link",{attrs:{to:{name:"tweets-main"}}},[a("i",{staticClass:"nav-icon fas fa-home"}),a("p",[t._v("首頁")])])],1),a("li",{staticClass:"nav-item nav-profile"},[a("router-link",{attrs:{to:{name:"user-profile-tweet",params:{id:t.currentUser.id}}}},[a("i",{staticClass:"nav-icon fas fa-user-alt"}),a("p",[t._v("個人資料")])])],1),a("li",{staticClass:"nav-item nav-setting"},[a("router-link",{attrs:{to:{name:"setting"}}},[a("i",{staticClass:"nav-icon fas fa-cog"}),a("p",[t._v("設定")])])],1),a("li",[a("button",{staticClass:"nav-teweet-button button",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addPost(e)}}},[t._v(" 推文 ")])])]),a("router-link",{staticClass:"nav-item nav-sign-out",attrs:{to:{name:"login"}}},[a("i",{staticClass:"nav-icon fas fa-sign-out-alt",on:{click:t.logout}}),a("p",{on:{click:t.logout}},[t._v("登出")])])],1)])},r=[],n=s("5530"),i=s("2f62"),c={data:function(){return{showModal:"post"}},computed:Object(n["a"])({},Object(i["b"])(["currentUser","isAuthenticated"])),methods:{addPost:function(){this.showModal="post",this.$emit("show-post-modal",this.showModal)},logout:function(){this.$store.commit("revokeAuthentication"),this.$router.push("/login")}}},o=c,l=(s("0a4e"),s("2877")),u=Object(l["a"])(o,a,r,!1,null,"19a7c5f0",null);e["a"]=u.exports},d81d:function(t,e,s){"use strict";var a=s("23e7"),r=s("b727").map,n=s("1dde"),i=n("map");a({target:"Array",proto:!0,forced:!i},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},e01a:function(t,e,s){"use strict";var a=s("23e7"),r=s("83ab"),n=s("da84"),i=s("5135"),c=s("861d"),o=s("9bf2").f,l=s("e893"),u=n.Symbol;if(r&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new u(t):void 0===t?u():u(t);return""===t&&(d[e]=!0),e};l(f,u);var v=f.prototype=u.prototype;v.constructor=f;var m=v.toString,p="Symbol(test)"==String(u("test")),w=/^Symbol\((.*)\)[^)]+$/;o(v,"description",{configurable:!0,get:function(){var t=c(this)?this.valueOf():this,e=m.call(t);if(i(d,t))return"";var s=p?e.slice(7,-1):e.replace(w,"$1");return""===s?void 0:s}}),a({global:!0,forced:!0},{Symbol:f})}}}]);
//# sourceMappingURL=chunk-63585a89.71413711.js.map